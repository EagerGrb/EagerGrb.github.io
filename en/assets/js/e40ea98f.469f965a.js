"use strict";(self.webpackChunkrobin_note_book=self.webpackChunkrobin_note_book||[]).push([[1278],{959:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"L-\u6e90\u7801\u7cfb\u5217/builtin-features","title":"\u5185\u7f6e\u529f\u80fd","description":"V8\u5b9e\u73b0\u4e86JavaScript\u7684\u6240\u6709\u5185\u7f6e\u5bf9\u8c61\u548c\u51fd\u6570\uff0c\u5305\u62ecArray\u3001Object\u3001Function\u7b49\u6838\u5fc3API\u3002","source":"@site/docs/L-\u6e90\u7801\u7cfb\u5217/07-builtin-features.md","sourceDirName":"L-\u6e90\u7801\u7cfb\u5217","slug":"/L-\u6e90\u7801\u7cfb\u5217/builtin-features","permalink":"/docs/en/main/L-\u6e90\u7801\u7cfb\u5217/builtin-features","draft":false,"unlisted":false,"editUrl":"https://github.com/EagerGrb/docs/L-\u6e90\u7801\u7cfb\u5217/07-builtin-features.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u6027\u80fd\u4f18\u5316\u673a\u5236","permalink":"/docs/en/main/L-\u6e90\u7801\u7cfb\u5217/performance-optimization"},"next":{"title":"\u8c03\u8bd5\u5206\u6790\u5de5\u5177","permalink":"/docs/en/main/L-\u6e90\u7801\u7cfb\u5217/debugging-tools"}}');var i=t(4848),l=t(8453);const s={},o="\u5185\u7f6e\u529f\u80fd",a={},c=[{value:"\u5185\u7f6e\u51fd\u6570\u67b6\u6784",id:"\u5185\u7f6e\u51fd\u6570\u67b6\u6784",level:2},{value:"Builtins\u7cfb\u7edf",id:"builtins\u7cfb\u7edf",level:3},{value:"\u5185\u7f6e\u51fd\u6570\u7c7b\u578b",id:"\u5185\u7f6e\u51fd\u6570\u7c7b\u578b",level:4},{value:"\u5b9e\u73b0\u65b9\u5f0f",id:"\u5b9e\u73b0\u65b9\u5f0f",level:4},{value:"Array\u5185\u7f6e\u51fd\u6570",id:"array\u5185\u7f6e\u51fd\u6570",level:2},{value:"Array.prototype.map",id:"arrayprototypemap",level:3},{value:"\u4f18\u5316\u7b56\u7565",id:"\u4f18\u5316\u7b56\u7565",level:4},{value:"Array.prototype.forEach",id:"arrayprototypeforeach",level:3},{value:"Object\u5185\u7f6e\u51fd\u6570",id:"object\u5185\u7f6e\u51fd\u6570",level:2},{value:"Object.prototype.toString",id:"objectprototypetostring",level:3},{value:"Object.defineProperty",id:"objectdefineproperty",level:3},{value:"Function\u5185\u7f6e\u51fd\u6570",id:"function\u5185\u7f6e\u51fd\u6570",level:2},{value:"Function.prototype.call",id:"functionprototypecall",level:3},{value:"Function.prototype.bind",id:"functionprototypebind",level:3},{value:"String\u5185\u7f6e\u51fd\u6570",id:"string\u5185\u7f6e\u51fd\u6570",level:2},{value:"String.prototype.substring",id:"stringprototypesubstring",level:3},{value:"\u5b57\u7b26\u4e32\u4f18\u5316",id:"\u5b57\u7b26\u4e32\u4f18\u5316",level:4},{value:"Promise\u5185\u7f6e\u51fd\u6570",id:"promise\u5185\u7f6e\u51fd\u6570",level:2},{value:"Promise\u6784\u9020\u51fd\u6570",id:"promise\u6784\u9020\u51fd\u6570",level:3},{value:"Promise.prototype.then",id:"promiseprototypethen",level:3},{value:"\u6b63\u5219\u8868\u8fbe\u5f0f",id:"\u6b63\u5219\u8868\u8fbe\u5f0f",level:2},{value:"RegExp\u6784\u9020\u51fd\u6570",id:"regexp\u6784\u9020\u51fd\u6570",level:3},{value:"RegExp.prototype.exec",id:"regexpprototypeexec",level:3},{value:"\u6570\u5b66\u51fd\u6570",id:"\u6570\u5b66\u51fd\u6570",level:2},{value:"Math.max",id:"mathmax",level:3},{value:"\u7c7b\u578b\u8f6c\u6362",id:"\u7c7b\u578b\u8f6c\u6362",level:2},{value:"ToString\u8f6c\u6362",id:"tostring\u8f6c\u6362",level:3},{value:"ToNumber\u8f6c\u6362",id:"tonumber\u8f6c\u6362",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u5185\u7f6e\u529f\u80fd",children:"\u5185\u7f6e\u529f\u80fd"})}),"\n",(0,i.jsx)(n.p,{children:"V8\u5b9e\u73b0\u4e86JavaScript\u7684\u6240\u6709\u5185\u7f6e\u5bf9\u8c61\u548c\u51fd\u6570\uff0c\u5305\u62ecArray\u3001Object\u3001Function\u7b49\u6838\u5fc3API\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u5185\u7f6e\u51fd\u6570\u67b6\u6784",children:"\u5185\u7f6e\u51fd\u6570\u67b6\u6784"}),"\n",(0,i.jsx)(n.h3,{id:"builtins\u7cfb\u7edf",children:"Builtins\u7cfb\u7edf"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4f4d\u7f6e"}),": ",(0,i.jsx)(n.code,{children:"src/builtins/"})]}),"\n",(0,i.jsx)(n.h4,{id:"\u5185\u7f6e\u51fd\u6570\u7c7b\u578b",children:"\u5185\u7f6e\u51fd\u6570\u7c7b\u578b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"enum class Builtin {\n  kArrayPrototypeMap,           // Array.prototype.map\n  kArrayPrototypeFilter,        // Array.prototype.filter\n  kObjectPrototypeToString,     // Object.prototype.toString\n  kFunctionPrototypeCall,       // Function.prototype.call\n  // ... \u66f4\u591a\u5185\u7f6e\u51fd\u6570\n};\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u5b9e\u73b0\u65b9\u5f0f",children:"\u5b9e\u73b0\u65b9\u5f0f"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"C++\u5b9e\u73b0"}),": \u6027\u80fd\u5173\u952e\u7684\u5185\u7f6e\u51fd\u6570"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"JavaScript\u5b9e\u73b0"}),": \u590d\u6742\u903b\u8f91\u7684\u5185\u7f6e\u51fd\u6570"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"CodeStub"}),": \u6c47\u7f16\u4f18\u5316\u7684\u5185\u7f6e\u51fd\u6570"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"TurboFan\u5185\u7f6e"}),": \u7f16\u8bd1\u5668\u751f\u6210\u7684\u5185\u7f6e\u51fd\u6570"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"array\u5185\u7f6e\u51fd\u6570",children:"Array\u5185\u7f6e\u51fd\u6570"}),"\n",(0,i.jsx)(n.h3,{id:"arrayprototypemap",children:"Array.prototype.map"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4f4d\u7f6e"}),": ",(0,i.jsx)(n.code,{children:"src/builtins/builtins-array.cc"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"BUILTIN(ArrayPrototypeMap) {\n  HandleScope scope(isolate);\n  \n  // \u83b7\u53d6this\u503c\u548ccallback\n  Handle<Object> receiver = args.receiver();\n  Handle<Object> callback = args.atOrUndefined(isolate, 1);\n  \n  // \u7c7b\u578b\u68c0\u67e5\u548c\u8f6c\u6362\n  Handle<JSReceiver> object;\n  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n      isolate, object, Object::ToObject(isolate, receiver));\n      \n  // \u83b7\u53d6length\u5c5e\u6027\n  Handle<Object> length_object;\n  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n      isolate, length_object,\n      Object::GetProperty(isolate, object, isolate->factory()->length_string()));\n      \n  // \u6267\u884cmap\u64cd\u4f5c\n  return MapProcessor(isolate, object, callback, length);\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u4f18\u5316\u7b56\u7565",children:"\u4f18\u5316\u7b56\u7565"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5feb\u901f\u8def\u5f84"}),": \u9488\u5bf9\u5e38\u89c1\u6570\u7ec4\u7c7b\u578b\u7684\u4f18\u5316"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u7c7b\u578b\u7279\u5316"}),": \u57fa\u4e8e\u5143\u7d20\u7c7b\u578b\u7684\u7279\u5316\u5b9e\u73b0"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5185\u8054\u5c55\u5f00"}),": \u7b80\u5355callback\u7684\u5185\u8054"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"arrayprototypeforeach",children:"Array.prototype.forEach"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"// \u5feb\u901f\u8def\u5f84\u68c0\u67e5\nif (array->IsJSArray() && callback->IsJSFunction()) {\n  return ForEachFastPath(isolate, array, callback);\n}\n// \u901a\u7528\u8def\u5f84\nreturn ForEachGeneric(isolate, object, callback);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"object\u5185\u7f6e\u51fd\u6570",children:"Object\u5185\u7f6e\u51fd\u6570"}),"\n",(0,i.jsx)(n.h3,{id:"objectprototypetostring",children:"Object.prototype.toString"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4f4d\u7f6e"}),": ",(0,i.jsx)(n.code,{children:"src/builtins/builtins-object.cc"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"BUILTIN(ObjectPrototypeToString) {\n  HandleScope scope(isolate);\n  Handle<Object> receiver = args.receiver();\n  \n  // \u83b7\u53d6@@toStringTag\n  Handle<Object> tag;\n  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n      isolate, tag,\n      JSReceiver::GetProperty(isolate, Handle<JSReceiver>::cast(receiver),\n                             isolate->factory()->to_string_tag_symbol()));\n                             \n  // \u751f\u6210\u5b57\u7b26\u4e32\u8868\u793a\n  return GenerateToStringResult(isolate, receiver, tag);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"objectdefineproperty",children:"Object.defineProperty"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"BUILTIN(ObjectDefineProperty) {\n  // \u53c2\u6570\u9a8c\u8bc1\n  Handle<Object> target = args.atOrUndefined(isolate, 1);\n  Handle<Object> key = args.atOrUndefined(isolate, 2);\n  Handle<Object> attributes = args.atOrUndefined(isolate, 3);\n  \n  // \u8c03\u7528\u5185\u90e8\u5b9e\u73b0\n  RETURN_RESULT_OR_FAILURE(\n      isolate, JSReceiver::DefineProperty(isolate, target, key, attributes));\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"function\u5185\u7f6e\u51fd\u6570",children:"Function\u5185\u7f6e\u51fd\u6570"}),"\n",(0,i.jsx)(n.h3,{id:"functionprototypecall",children:"Function.prototype.call"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4f4d\u7f6e"}),": ",(0,i.jsx)(n.code,{children:"src/builtins/builtins-function.cc"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"BUILTIN(FunctionPrototypeCall) {\n  HandleScope scope(isolate);\n  \n  // \u83b7\u53d6\u76ee\u6807\u51fd\u6570\n  Handle<Object> target = args.receiver();\n  if (!target->IsCallable()) {\n    THROW_NEW_ERROR_RETURN_FAILURE(\n        isolate, NewTypeError(MessageTemplate::kCalledNonCallable, target));\n  }\n  \n  // \u83b7\u53d6this\u503c\u548c\u53c2\u6570\n  Handle<Object> this_arg = args.atOrUndefined(isolate, 1);\n  int argc = std::max(0, args.length() - 2);\n  \n  // \u6267\u884c\u8c03\u7528\n  return Execution::Call(isolate, target, this_arg, argc, args.data() + 2);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"functionprototypebind",children:"Function.prototype.bind"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"BUILTIN(FunctionPrototypeBind) {\n  // \u521b\u5efa\u7ed1\u5b9a\u51fd\u6570\n  Handle<JSBoundFunction> bound_function = \n      isolate->factory()->NewJSBoundFunction(target, bound_this, bound_args);\n      \n  // \u8bbe\u7f6elength\u5c5e\u6027\n  int length = std::max(0, target_length - bound_args->length());\n  bound_function->set_length(length);\n  \n  return *bound_function;\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"string\u5185\u7f6e\u51fd\u6570",children:"String\u5185\u7f6e\u51fd\u6570"}),"\n",(0,i.jsx)(n.h3,{id:"stringprototypesubstring",children:"String.prototype.substring"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4f4d\u7f6e"}),": ",(0,i.jsx)(n.code,{children:"src/builtins/builtins-string.cc"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"BUILTIN(StringPrototypeSubstring) {\n  HandleScope scope(isolate);\n  \n  // \u8f6c\u6362\u4e3a\u5b57\u7b26\u4e32\n  Handle<String> string;\n  ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n      isolate, string, Object::ToString(isolate, args.receiver()));\n      \n  // \u83b7\u53d6\u53c2\u6570\n  int start = 0, end = string->length();\n  if (args.length() > 1) {\n    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n        isolate, start, Object::ToInteger(isolate, args.at(1)));\n  }\n  \n  // \u6267\u884csubstring\u64cd\u4f5c\n  return *isolate->factory()->NewSubString(string, start, end);\n}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u5b57\u7b26\u4e32\u4f18\u5316",children:"\u5b57\u7b26\u4e32\u4f18\u5316"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5b50\u5b57\u7b26\u4e32\u5171\u4eab"}),": \u907f\u514d\u590d\u5236\uff0c\u5171\u4eab\u539f\u5b57\u7b26\u4e32"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6241\u5e73\u5316\u5ef6\u8fdf"}),": \u5ef6\u8fdf\u5b57\u7b26\u4e32\u6241\u5e73\u5316\u64cd\u4f5c"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u5185\u5316\u7f13\u5b58"}),": \u5e38\u7528\u5b57\u7b26\u4e32\u7684\u5185\u5316"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"promise\u5185\u7f6e\u51fd\u6570",children:"Promise\u5185\u7f6e\u51fd\u6570"}),"\n",(0,i.jsx)(n.h3,{id:"promise\u6784\u9020\u51fd\u6570",children:"Promise\u6784\u9020\u51fd\u6570"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4f4d\u7f6e"}),": ",(0,i.jsx)(n.code,{children:"src/builtins/builtins-promise.cc"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"BUILTIN(PromiseConstructor) {\n  HandleScope scope(isolate);\n  \n  // \u68c0\u67e5new.target\n  Handle<Object> new_target = args.new_target();\n  if (new_target->IsUndefined(isolate)) {\n    THROW_NEW_ERROR_RETURN_FAILURE(\n        isolate, NewTypeError(MessageTemplate::kNotAPromise));\n  }\n  \n  // \u521b\u5efaPromise\u5bf9\u8c61\n  Handle<JSPromise> promise = Handle<JSPromise>::cast(\n      JSObject::New(target, new_target, Handle<AllocationSite>::null()));\n      \n  // \u6267\u884cexecutor\n  return ExecutePromiseExecutor(isolate, promise, executor);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"promiseprototypethen",children:"Promise.prototype.then"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"BUILTIN(PromisePrototypeThen) {\n  // \u521b\u5efa\u65b0\u7684Promise\n  Handle<JSPromise> result_promise = \n      NewPromiseCapability(isolate, constructor);\n      \n  // \u6dfb\u52a0reaction\n  Handle<PromiseReaction> reaction = \n      isolate->factory()->NewPromiseReaction(\n          result_promise, on_fulfilled, on_rejected);\n          \n  // \u6839\u636ePromise\u72b6\u6001\u5904\u7406\n  if (promise->status() == Promise::kPending) {\n    // \u6dfb\u52a0\u5230reaction\u5217\u8868\n    AddToReactionList(promise, reaction);\n  } else {\n    // \u7acb\u5373\u89e6\u53d1reaction\n    TriggerPromiseReaction(isolate, reaction, promise);\n  }\n  \n  return *result_promise;\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u6b63\u5219\u8868\u8fbe\u5f0f",children:"\u6b63\u5219\u8868\u8fbe\u5f0f"}),"\n",(0,i.jsx)(n.h3,{id:"regexp\u6784\u9020\u51fd\u6570",children:"RegExp\u6784\u9020\u51fd\u6570"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4f4d\u7f6e"}),": ",(0,i.jsx)(n.code,{children:"src/builtins/builtins-regexp.cc"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"BUILTIN(RegExpConstructor) {\n  HandleScope scope(isolate);\n  \n  // \u89e3\u6790\u6a21\u5f0f\u548c\u6807\u5fd7\n  Handle<String> pattern = GetPattern(isolate, args.at(1));\n  Handle<String> flags = GetFlags(isolate, args.at(2));\n  \n  // \u7f16\u8bd1\u6b63\u5219\u8868\u8fbe\u5f0f\n  Handle<JSRegExp> regexp = JSRegExp::New(isolate, pattern, flags);\n  \n  return *regexp;\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"regexpprototypeexec",children:"RegExp.prototype.exec"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"BUILTIN(RegExpPrototypeExec) {\n  // \u83b7\u53d6lastIndex\n  int last_index = GetLastIndex(isolate, regexp);\n  \n  // \u6267\u884c\u5339\u914d\n  Handle<Object> result = RegExpExecInternal(\n      isolate, regexp, string, last_index);\n      \n  // \u66f4\u65b0lastIndex\n  if (regexp->global() || regexp->sticky()) {\n    SetLastIndex(isolate, regexp, new_last_index);\n  }\n  \n  return *result;\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u6570\u5b66\u51fd\u6570",children:"\u6570\u5b66\u51fd\u6570"}),"\n",(0,i.jsx)(n.h3,{id:"mathmax",children:"Math.max"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u4f4d\u7f6e"}),": ",(0,i.jsx)(n.code,{children:"src/builtins/builtins-math.cc"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"BUILTIN(MathMax) {\n  HandleScope scope(isolate);\n  \n  double result = -V8_INFINITY;\n  for (int i = 1; i < args.length(); ++i) {\n    Handle<Object> arg = args.at(i);\n    \n    // \u8f6c\u6362\u4e3a\u6570\u5b57\n    Handle<Object> number;\n    ASSIGN_RETURN_FAILURE_ON_EXCEPTION(\n        isolate, number, Object::ToNumber(isolate, arg));\n        \n    double value = number->Number();\n    if (std::isnan(value)) return ReadOnlyRoots(isolate).nan_value();\n    \n    result = std::max(result, value);\n  }\n  \n  return *isolate->factory()->NewNumber(result);\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u7c7b\u578b\u8f6c\u6362",children:"\u7c7b\u578b\u8f6c\u6362"}),"\n",(0,i.jsx)(n.h3,{id:"tostring\u8f6c\u6362",children:"ToString\u8f6c\u6362"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"Handle<String> Object::ToString(Isolate* isolate, Handle<Object> input) {\n  if (input->IsString()) return Handle<String>::cast(input);\n  \n  if (input->IsNumber()) {\n    return isolate->factory()->NumberToString(input);\n  }\n  \n  if (input->IsBoolean()) {\n    return input->IsTrue(isolate) ? \n           isolate->factory()->true_string() :\n           isolate->factory()->false_string();\n  }\n  \n  // \u8c03\u7528\u5bf9\u8c61\u7684toString\u65b9\u6cd5\n  return CallToStringMethod(isolate, input);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"tonumber\u8f6c\u6362",children:"ToNumber\u8f6c\u6362"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cpp",children:"Handle<Object> Object::ToNumber(Isolate* isolate, Handle<Object> input) {\n  if (input->IsNumber()) return input;\n  \n  if (input->IsString()) {\n    return String::ToNumber(isolate, Handle<String>::cast(input));\n  }\n  \n  if (input->IsBoolean()) {\n    return isolate->factory()->NewNumber(input->IsTrue(isolate) ? 1 : 0);\n  }\n  \n  // \u8c03\u7528\u5bf9\u8c61\u7684valueOf\u65b9\u6cd5\n  return CallValueOfMethod(isolate, input);\n}\n"})})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var r=t(6540);const i={},l=r.createContext(i);function s(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);