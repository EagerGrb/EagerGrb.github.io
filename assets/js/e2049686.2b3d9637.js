"use strict";(self.webpackChunkrobin_note_book=self.webpackChunkrobin_note_book||[]).push([[5929],{203:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>o,frontMatter:()=>c,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"L-\u6e90\u7801\u7cfb\u5217/performance-optimization","title":"\u6027\u80fd\u4f18\u5316\u673a\u5236","description":"V8\u901a\u8fc7\u591a\u79cd\u673a\u5236\u4f18\u5316JavaScript\u6267\u884c\u6027\u80fd\uff0c\u4e3b\u8981\u5305\u62ec\u5185\u8054\u7f13\u5b58\u3001\u9690\u85cf\u7c7b\u3001\u53cd\u9988\u5411\u91cf\u7b49\u3002","source":"@site/docs/L-\u6e90\u7801\u7cfb\u5217/06-performance-optimization.md","sourceDirName":"L-\u6e90\u7801\u7cfb\u5217","slug":"/L-\u6e90\u7801\u7cfb\u5217/performance-optimization","permalink":"/docs/main/L-\u6e90\u7801\u7cfb\u5217/performance-optimization","draft":false,"unlisted":false,"editUrl":"https://github.com/EagerGrb/docs/L-\u6e90\u7801\u7cfb\u5217/06-performance-optimization.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u8fd0\u884c\u65f6\u7cfb\u7edf","permalink":"/docs/main/L-\u6e90\u7801\u7cfb\u5217/runtime-system"},"next":{"title":"\u5185\u7f6e\u529f\u80fd","permalink":"/docs/main/L-\u6e90\u7801\u7cfb\u5217/builtin-features"}}');var s=l(4848),r=l(8453);const c={},d="\u6027\u80fd\u4f18\u5316\u673a\u5236",a={},t=[{value:"\u5185\u8054\u7f13\u5b58 (Inline Caches)",id:"\u5185\u8054\u7f13\u5b58-inline-caches",level:2},{value:"IC\u6982\u8ff0",id:"ic\u6982\u8ff0",level:3},{value:"IC\u72b6\u6001",id:"ic\u72b6\u6001",level:4},{value:"\u5c5e\u6027\u8bbf\u95eeIC",id:"\u5c5e\u6027\u8bbf\u95eeic",level:3},{value:"LoadIC (\u5c5e\u6027\u52a0\u8f7d)",id:"loadic-\u5c5e\u6027\u52a0\u8f7d",level:4},{value:"\u4f18\u5316\u7b56\u7565",id:"\u4f18\u5316\u7b56\u7565",level:4},{value:"\u793a\u4f8b\u4f18\u5316\u8fc7\u7a0b",id:"\u793a\u4f8b\u4f18\u5316\u8fc7\u7a0b",level:4},{value:"\u65b9\u6cd5\u8c03\u7528IC",id:"\u65b9\u6cd5\u8c03\u7528ic",level:3},{value:"CallIC",id:"callic",level:4},{value:"\u4f18\u5316\u6280\u672f",id:"\u4f18\u5316\u6280\u672f",level:4},{value:"\u9690\u85cf\u7c7b\u7cfb\u7edf",id:"\u9690\u85cf\u7c7b\u7cfb\u7edf",level:2},{value:"Map\u8f6c\u6362\u94fe",id:"map\u8f6c\u6362\u94fe",level:3},{value:"\u8f6c\u6362\u7c7b\u578b",id:"\u8f6c\u6362\u7c7b\u578b",level:4},{value:"\u8f6c\u6362\u793a\u4f8b",id:"\u8f6c\u6362\u793a\u4f8b",level:4},{value:"\u5c5e\u6027\u5b58\u50a8\u4f18\u5316",id:"\u5c5e\u6027\u5b58\u50a8\u4f18\u5316",level:3},{value:"\u5feb\u901f\u5c5e\u6027",id:"\u5feb\u901f\u5c5e\u6027",level:4},{value:"\u5c5e\u6027\u8bbf\u95ee\u8def\u5f84",id:"\u5c5e\u6027\u8bbf\u95ee\u8def\u5f84",level:4},{value:"\u5143\u7d20\u5b58\u50a8\u4f18\u5316",id:"\u5143\u7d20\u5b58\u50a8\u4f18\u5316",level:3},{value:"\u5143\u7d20\u7c7b\u578b",id:"\u5143\u7d20\u7c7b\u578b",level:4},{value:"\u5143\u7d20\u8f6c\u6362",id:"\u5143\u7d20\u8f6c\u6362",level:4},{value:"\u53cd\u9988\u5411\u91cf (Feedback Vector)",id:"\u53cd\u9988\u5411\u91cf-feedback-vector",level:2},{value:"\u7c7b\u578b\u53cd\u9988\u6536\u96c6",id:"\u7c7b\u578b\u53cd\u9988\u6536\u96c6",level:3},{value:"\u53cd\u9988\u7c7b\u578b",id:"\u53cd\u9988\u7c7b\u578b",level:4},{value:"\u63a8\u6d4b\u4f18\u5316",id:"\u63a8\u6d4b\u4f18\u5316",level:3},{value:"\u7c7b\u578b\u63a8\u6d4b",id:"\u7c7b\u578b\u63a8\u6d4b",level:4},{value:"\u4f18\u5316\u51b3\u7b56",id:"\u4f18\u5316\u51b3\u7b56",level:4},{value:"\u5b57\u7b26\u4e32\u4f18\u5316",id:"\u5b57\u7b26\u4e32\u4f18\u5316",level:2},{value:"\u5b57\u7b26\u4e32\u8868\u793a",id:"\u5b57\u7b26\u4e32\u8868\u793a",level:3},{value:"\u5b57\u7b26\u4e32\u7c7b\u578b",id:"\u5b57\u7b26\u4e32\u7c7b\u578b",level:4},{value:"\u5b57\u7b26\u4e32\u4f18\u5316\u6280\u672f",id:"\u5b57\u7b26\u4e32\u4f18\u5316\u6280\u672f",level:3},{value:"\u5b57\u7b26\u4e32\u5185\u5316",id:"\u5b57\u7b26\u4e32\u5185\u5316",level:4},{value:"\u5ef6\u8fdf\u8fde\u63a5",id:"\u5ef6\u8fdf\u8fde\u63a5",level:4},{value:"\u6570\u7ec4\u4f18\u5316",id:"\u6570\u7ec4\u4f18\u5316",level:2},{value:"\u6570\u7ec4\u7c7b\u578b\u7279\u5316",id:"\u6570\u7ec4\u7c7b\u578b\u7279\u5316",level:3},{value:"\u5feb\u901f\u6570\u7ec4\u64cd\u4f5c",id:"\u5feb\u901f\u6570\u7ec4\u64cd\u4f5c",level:4},{value:"\u4f18\u5316\u6280\u672f",id:"\u4f18\u5316\u6280\u672f-1",level:4},{value:"\u7a00\u758f\u6570\u7ec4\u5904\u7406",id:"\u7a00\u758f\u6570\u7ec4\u5904\u7406",level:3},{value:"\u51fd\u6570\u4f18\u5316",id:"\u51fd\u6570\u4f18\u5316",level:2},{value:"\u51fd\u6570\u5185\u8054",id:"\u51fd\u6570\u5185\u8054",level:3},{value:"\u5185\u8054\u6761\u4ef6",id:"\u5185\u8054\u6761\u4ef6",level:4},{value:"\u53c2\u6570\u4f18\u5316",id:"\u53c2\u6570\u4f18\u5316",level:3},{value:"\u6027\u80fd\u76d1\u63a7",id:"\u6027\u80fd\u76d1\u63a7",level:2},{value:"\u6027\u80fd\u8ba1\u6570\u5668",id:"\u6027\u80fd\u8ba1\u6570\u5668",level:3},{value:"\u4f18\u5316\u8ddf\u8e2a",id:"\u4f18\u5316\u8ddf\u8e2a",level:3}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u6027\u80fd\u4f18\u5316\u673a\u5236",children:"\u6027\u80fd\u4f18\u5316\u673a\u5236"})}),"\n",(0,s.jsx)(n.p,{children:"V8\u901a\u8fc7\u591a\u79cd\u673a\u5236\u4f18\u5316JavaScript\u6267\u884c\u6027\u80fd\uff0c\u4e3b\u8981\u5305\u62ec\u5185\u8054\u7f13\u5b58\u3001\u9690\u85cf\u7c7b\u3001\u53cd\u9988\u5411\u91cf\u7b49\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"\u5185\u8054\u7f13\u5b58-inline-caches",children:"\u5185\u8054\u7f13\u5b58 (Inline Caches)"}),"\n",(0,s.jsx)(n.h3,{id:"ic\u6982\u8ff0",children:"IC\u6982\u8ff0"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4f4d\u7f6e"}),": ",(0,s.jsx)(n.code,{children:"src/ic/"})]}),"\n",(0,s.jsx)(n.p,{children:"\u5185\u8054\u7f13\u5b58\u662fV8\u4f18\u5316\u5c5e\u6027\u8bbf\u95ee\u548c\u65b9\u6cd5\u8c03\u7528\u7684\u6838\u5fc3\u673a\u5236\u3002"}),"\n",(0,s.jsx)(n.h4,{id:"ic\u72b6\u6001",children:"IC\u72b6\u6001"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"enum ICState {\n  UNINITIALIZED,    // \u672a\u521d\u59cb\u5316\n  PREMONOMORPHIC,   // \u9884\u5355\u6001\n  MONOMORPHIC,      // \u5355\u6001\n  RECOMPUTE_HANDLER,// \u91cd\u65b0\u8ba1\u7b97\u5904\u7406\u5668\n  POLYMORPHIC,      // \u591a\u6001\n  MEGAMORPHIC,      // \u8d85\u591a\u6001\n  GENERIC           // \u901a\u7528\n};\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5c5e\u6027\u8bbf\u95eeic",children:"\u5c5e\u6027\u8bbf\u95eeIC"}),"\n",(0,s.jsx)(n.h4,{id:"loadic-\u5c5e\u6027\u52a0\u8f7d",children:"LoadIC (\u5c5e\u6027\u52a0\u8f7d)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class LoadIC : public IC {\n  void UpdateCaches(LookupIterator* lookup);\n  Handle<Object> Load(Handle<Object> object, Handle<Name> name);\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u4f18\u5316\u7b56\u7565",children:"\u4f18\u5316\u7b56\u7565"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5355\u6001\u4f18\u5316"}),": \u5bf9\u8c61\u7c7b\u578b\u56fa\u5b9a\u65f6\u7684\u5feb\u901f\u8bbf\u95ee"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u591a\u6001\u4f18\u5316"}),": \u5c11\u6570\u51e0\u79cd\u7c7b\u578b\u7684\u4f18\u5316\u5904\u7406"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8d85\u591a\u6001\u56de\u9000"}),": \u7c7b\u578b\u8fc7\u591a\u65f6\u56de\u9000\u5230\u901a\u7528\u5904\u7406"]}),"\n"]}),"\n",(0,s.jsx)(n.h4,{id:"\u793a\u4f8b\u4f18\u5316\u8fc7\u7a0b",children:"\u793a\u4f8b\u4f18\u5316\u8fc7\u7a0b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u521d\u59cb\u72b6\u6001: UNINITIALIZED\nobj.prop;\n\n// \u7b2c\u4e00\u6b21\u8bbf\u95ee: MONOMORPHIC\n// \u7f13\u5b58: obj\u7684Map \u2192 prop\u7684\u504f\u79fb\u91cf\n\n// \u76f8\u540c\u7c7b\u578b\u8bbf\u95ee: \u76f4\u63a5\u4f7f\u7528\u7f13\u5b58\nobj2.prop; // obj2\u4e0eobj\u540c\u7c7b\u578b\n\n// \u4e0d\u540c\u7c7b\u578b\u8bbf\u95ee: \u8f6c\u4e3aPOLYMORPHIC\nobj3.prop; // obj3\u7c7b\u578b\u4e0d\u540c\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u65b9\u6cd5\u8c03\u7528ic",children:"\u65b9\u6cd5\u8c03\u7528IC"}),"\n",(0,s.jsx)(n.h4,{id:"callic",children:"CallIC"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class CallIC : public IC {\n  void HandleMiss(Handle<Object> function, Handle<Object> receiver);\n  Handle<Object> Call(Handle<Object> callable, Handle<Object> receiver);\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u4f18\u5316\u6280\u672f",children:"\u4f18\u5316\u6280\u672f"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u65b9\u6cd5\u5185\u8054"}),": \u5c06\u5c0f\u65b9\u6cd5\u76f4\u63a5\u5185\u8054\u5230\u8c03\u7528\u70b9"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u865a\u51fd\u6570\u4f18\u5316"}),": \u57fa\u4e8e\u7c7b\u578b\u4fe1\u606f\u7684\u76f4\u63a5\u8c03\u7528"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u53c2\u6570\u7279\u5316"}),": \u57fa\u4e8e\u53c2\u6570\u7c7b\u578b\u7684\u4f18\u5316"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u9690\u85cf\u7c7b\u7cfb\u7edf",children:"\u9690\u85cf\u7c7b\u7cfb\u7edf"}),"\n",(0,s.jsx)(n.h3,{id:"map\u8f6c\u6362\u94fe",children:"Map\u8f6c\u6362\u94fe"}),"\n",(0,s.jsx)(n.h4,{id:"\u8f6c\u6362\u7c7b\u578b",children:"\u8f6c\u6362\u7c7b\u578b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"enum PropertyKind {\n  kData,                // \u6570\u636e\u5c5e\u6027\n  kAccessor,           // \u8bbf\u95ee\u5668\u5c5e\u6027\n  kDataConstant        // \u5e38\u91cf\u5c5e\u6027\n};\n\nenum PropertyLocation {\n  kField,              // \u5b57\u6bb5\u5c5e\u6027\n  kDescriptor          // \u63cf\u8ff0\u7b26\u5c5e\u6027\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u8f6c\u6362\u793a\u4f8b",children:"\u8f6c\u6362\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u7a7a\u5bf9\u8c61\nlet obj = {};           // Map0\n\n// \u6dfb\u52a0\u5c5e\u6027x\nobj.x = 1;             // Map0 \u2192 Map1\n\n// \u6dfb\u52a0\u5c5e\u6027y  \nobj.y = 2;             // Map1 \u2192 Map2\n\n// \u5220\u9664\u5c5e\u6027x\ndelete obj.x;          // Map2 \u2192 Map3 (\u6162\u5c5e\u6027)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5c5e\u6027\u5b58\u50a8\u4f18\u5316",children:"\u5c5e\u6027\u5b58\u50a8\u4f18\u5316"}),"\n",(0,s.jsx)(n.h4,{id:"\u5feb\u901f\u5c5e\u6027",children:"\u5feb\u901f\u5c5e\u6027"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class JSObject {\n  // \u5185\u8054\u5c5e\u6027: \u76f4\u63a5\u5b58\u50a8\u5728\u5bf9\u8c61\u4e2d\n  Object* RawFastPropertyAt(FieldIndex index);\n  \n  // \u5916\u8054\u5c5e\u6027: \u5b58\u50a8\u5728\u5c5e\u6027\u6570\u7ec4\u4e2d\n  PropertyArray* property_array();\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5c5e\u6027\u8bbf\u95ee\u8def\u5f84",children:"\u5c5e\u6027\u8bbf\u95ee\u8def\u5f84"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5185\u8054\u5c5e\u6027"}),": \u5bf9\u8c61 + \u504f\u79fb\u91cf \u2192 \u503c"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5916\u8054\u5c5e\u6027"}),": \u5bf9\u8c61 \u2192 \u5c5e\u6027\u6570\u7ec4 + \u7d22\u5f15 \u2192 \u503c"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5b57\u5178\u5c5e\u6027"}),": \u5bf9\u8c61 \u2192 \u5b57\u5178 + \u67e5\u627e \u2192 \u503c"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5143\u7d20\u5b58\u50a8\u4f18\u5316",children:"\u5143\u7d20\u5b58\u50a8\u4f18\u5316"}),"\n",(0,s.jsx)(n.h4,{id:"\u5143\u7d20\u7c7b\u578b",children:"\u5143\u7d20\u7c7b\u578b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"enum ElementsKind {\n  PACKED_SMI_ELEMENTS,          // \u7d27\u5bc6Smi\u6570\u7ec4\n  HOLEY_SMI_ELEMENTS,           // \u7a00\u758fSmi\u6570\u7ec4\n  PACKED_DOUBLE_ELEMENTS,       // \u7d27\u5bc6\u53cc\u7cbe\u5ea6\u6570\u7ec4\n  HOLEY_DOUBLE_ELEMENTS,        // \u7a00\u758f\u53cc\u7cbe\u5ea6\u6570\u7ec4\n  PACKED_ELEMENTS,              // \u7d27\u5bc6\u5bf9\u8c61\u6570\u7ec4\n  HOLEY_ELEMENTS,               // \u7a00\u758f\u5bf9\u8c61\u6570\u7ec4\n  DICTIONARY_ELEMENTS           // \u5b57\u5178\u5143\u7d20\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5143\u7d20\u8f6c\u6362",children:"\u5143\u7d20\u8f6c\u6362"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:'let arr = [1, 2, 3];          // PACKED_SMI_ELEMENTS\narr[10] = 4;                  // \u2192 HOLEY_SMI_ELEMENTS\narr[0] = 1.5;                 // \u2192 HOLEY_DOUBLE_ELEMENTS\narr[1] = "string";            // \u2192 HOLEY_ELEMENTS\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u53cd\u9988\u5411\u91cf-feedback-vector",children:"\u53cd\u9988\u5411\u91cf (Feedback Vector)"}),"\n",(0,s.jsx)(n.h3,{id:"\u7c7b\u578b\u53cd\u9988\u6536\u96c6",children:"\u7c7b\u578b\u53cd\u9988\u6536\u96c6"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4f4d\u7f6e"}),": ",(0,s.jsx)(n.code,{children:"src/objects/feedback-vector.h"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class FeedbackVector : public HeapObject {\n  Object* Get(FeedbackSlot slot);\n  void Set(FeedbackSlot slot, Object* value);\n  int invocation_count();\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u53cd\u9988\u7c7b\u578b",children:"\u53cd\u9988\u7c7b\u578b"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u7c7b\u578b\u4fe1\u606f"}),": \u64cd\u4f5c\u6570\u7684\u7c7b\u578b\u5386\u53f2"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8c03\u7528\u76ee\u6807"}),": \u51fd\u6570\u8c03\u7528\u7684\u76ee\u6807\u4fe1\u606f"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5c5e\u6027\u8bbf\u95ee"}),": \u5c5e\u6027\u8bbf\u95ee\u7684Map\u4fe1\u606f"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5143\u7d20\u8bbf\u95ee"}),": \u6570\u7ec4\u8bbf\u95ee\u7684\u5143\u7d20\u7c7b\u578b"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u63a8\u6d4b\u4f18\u5316",children:"\u63a8\u6d4b\u4f18\u5316"}),"\n",(0,s.jsx)(n.h4,{id:"\u7c7b\u578b\u63a8\u6d4b",children:"\u7c7b\u578b\u63a8\u6d4b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class TypeFeedbackOracle {\n  CompareOperationHint GetCompareOperationHint(FeedbackSlot slot);\n  BinaryOperationHint GetBinaryOperationHint(FeedbackSlot slot);\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u4f18\u5316\u51b3\u7b56",children:"\u4f18\u5316\u51b3\u7b56"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5355\u6001\u5047\u8bbe"}),": \u5047\u8bbe\u7c7b\u578b\u4e0d\u53d8"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8303\u56f4\u5047\u8bbe"}),": \u5047\u8bbe\u6570\u503c\u5728\u7279\u5b9a\u8303\u56f4"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4e0d\u53d8\u6027\u5047\u8bbe"}),": \u5047\u8bbe\u67d0\u4e9b\u5c5e\u6027\u4e0d\u53d8"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u5b57\u7b26\u4e32\u4f18\u5316",children:"\u5b57\u7b26\u4e32\u4f18\u5316"}),"\n",(0,s.jsx)(n.h3,{id:"\u5b57\u7b26\u4e32\u8868\u793a",children:"\u5b57\u7b26\u4e32\u8868\u793a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class String : public Name {\n  bool IsSeqString();           // \u987a\u5e8f\u5b57\u7b26\u4e32\n  bool IsConsString();          // \u8fde\u63a5\u5b57\u7b26\u4e32\n  bool IsSlicedString();        // \u5207\u7247\u5b57\u7b26\u4e32\n  bool IsExternalString();      // \u5916\u90e8\u5b57\u7b26\u4e32\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5b57\u7b26\u4e32\u7c7b\u578b",children:"\u5b57\u7b26\u4e32\u7c7b\u578b"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SeqString"}),": \u8fde\u7eed\u5b58\u50a8\u7684\u5b57\u7b26\u4e32"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ConsString"}),": \u4e24\u4e2a\u5b57\u7b26\u4e32\u7684\u8fde\u63a5"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"SlicedString"}),": \u53e6\u4e00\u4e2a\u5b57\u7b26\u4e32\u7684\u5b50\u4e32"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ThinString"}),": \u6307\u5411\u5176\u4ed6\u5b57\u7b26\u4e32\u7684\u7626\u6307\u9488"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5b57\u7b26\u4e32\u4f18\u5316\u6280\u672f",children:"\u5b57\u7b26\u4e32\u4f18\u5316\u6280\u672f"}),"\n",(0,s.jsx)(n.h4,{id:"\u5b57\u7b26\u4e32\u5185\u5316",children:"\u5b57\u7b26\u4e32\u5185\u5316"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class StringTable {\n  Handle<String> LookupString(Isolate* isolate, Handle<String> string);\n  Handle<String> LookupKey(Isolate* isolate, StringTableKey* key);\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5ef6\u8fdf\u8fde\u63a5",children:"\u5ef6\u8fdf\u8fde\u63a5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u4e0d\u7acb\u5373\u521b\u5efa\u65b0\u5b57\u7b26\u4e32\nlet result = str1 + str2;  // \u521b\u5efaConsString\n\n// \u8bbf\u95ee\u65f6\u624d\u5c55\u5e73\nlet char = result[0];      // \u89e6\u53d1\u5c55\u5e73\u64cd\u4f5c\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u6570\u7ec4\u4f18\u5316",children:"\u6570\u7ec4\u4f18\u5316"}),"\n",(0,s.jsx)(n.h3,{id:"\u6570\u7ec4\u7c7b\u578b\u7279\u5316",children:"\u6570\u7ec4\u7c7b\u578b\u7279\u5316"}),"\n",(0,s.jsx)(n.h4,{id:"\u5feb\u901f\u6570\u7ec4\u64cd\u4f5c",children:"\u5feb\u901f\u6570\u7ec4\u64cd\u4f5c"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class JSArray : public JSObject {\n  double length();\n  void set_length(double length);\n  FixedArrayBase* elements();\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u4f18\u5316\u6280\u672f-1",children:"\u4f18\u5316\u6280\u672f"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u7c7b\u578b\u7279\u5316"}),": \u57fa\u4e8e\u5143\u7d20\u7c7b\u578b\u7684\u4f18\u5316"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8fb9\u754c\u68c0\u67e5\u6d88\u9664"}),": \u5faa\u73af\u4e2d\u7684\u8fb9\u754c\u68c0\u67e5\u4f18\u5316"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5185\u8054\u5c55\u5f00"}),": \u6570\u7ec4\u65b9\u6cd5\u7684\u5185\u8054\u4f18\u5316"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u7a00\u758f\u6570\u7ec4\u5904\u7406",children:"\u7a00\u758f\u6570\u7ec4\u5904\u7406"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"let arr = [];\narr[1000000] = 1;  // \u8f6c\u4e3a\u5b57\u5178\u6a21\u5f0f\uff0c\u907f\u514d\u5185\u5b58\u6d6a\u8d39\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u51fd\u6570\u4f18\u5316",children:"\u51fd\u6570\u4f18\u5316"}),"\n",(0,s.jsx)(n.h3,{id:"\u51fd\u6570\u5185\u8054",children:"\u51fd\u6570\u5185\u8054"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class JSInliner {\n  Reduction ReduceJSCall(Node* node);\n  bool CanInlineFunction(Handle<SharedFunctionInfo> info);\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5185\u8054\u6761\u4ef6",children:"\u5185\u8054\u6761\u4ef6"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u51fd\u6570\u5927\u5c0f"}),": \u5c0f\u51fd\u6570\u4f18\u5148\u5185\u8054"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8c03\u7528\u9891\u7387"}),": \u70ed\u70b9\u8c03\u7528\u4f18\u5148\u5185\u8054"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u7c7b\u578b\u7a33\u5b9a"}),": \u76ee\u6807\u51fd\u6570\u7c7b\u578b\u7a33\u5b9a"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u53c2\u6570\u4f18\u5316",children:"\u53c2\u6570\u4f18\u5316"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u53c2\u6570\u7279\u5316"}),": \u57fa\u4e8e\u5e38\u89c1\u53c2\u6570\u503c\u7684\u4f18\u5316"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u53c2\u6570\u6d88\u9664"}),": \u672a\u4f7f\u7528\u53c2\u6570\u7684\u6d88\u9664"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"this\u7ed1\u5b9a\u4f18\u5316"}),": this\u503c\u7684\u4f18\u5316\u5904\u7406"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u6027\u80fd\u76d1\u63a7",children:"\u6027\u80fd\u76d1\u63a7"}),"\n",(0,s.jsx)(n.h3,{id:"\u6027\u80fd\u8ba1\u6570\u5668",children:"\u6027\u80fd\u8ba1\u6570\u5668"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class RuntimeCallStats {\n  void Enter(RuntimeCallCounterId counter_id);\n  void Leave(RuntimeCallCounterId counter_id);\n  void Print();\n};\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u4f18\u5316\u8ddf\u8e2a",children:"\u4f18\u5316\u8ddf\u8e2a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u8ddf\u8e2a\u4f18\u5316\u8fc7\u7a0b\nd8 --trace-opt --trace-deopt script.js\n\n# \u67e5\u770bIC\u72b6\u6001\nd8 --trace-ic script.js\n\n# \u6027\u80fd\u5206\u6790\nd8 --prof script.js\n"})})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>c,x:()=>d});var i=l(6540);const s={},r=i.createContext(s);function c(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);