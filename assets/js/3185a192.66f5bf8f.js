"use strict";(self.webpackChunkrobin_note_book=self.webpackChunkrobin_note_book||[]).push([[9913],{4172:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"L-\u6e90\u7801\u7cfb\u5217/debugging-tools","title":"\u8c03\u8bd5\u5206\u6790\u5de5\u5177","description":"V8\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u8c03\u8bd5\u548c\u6027\u80fd\u5206\u6790\u5de5\u5177\uff0c\u5e2e\u52a9\u5f00\u53d1\u8005\u7406\u89e3\u548c\u4f18\u5316JavaScript\u4ee3\u7801\u3002","source":"@site/docs/L-\u6e90\u7801\u7cfb\u5217/08-debugging-tools.md","sourceDirName":"L-\u6e90\u7801\u7cfb\u5217","slug":"/L-\u6e90\u7801\u7cfb\u5217/debugging-tools","permalink":"/docs/main/L-\u6e90\u7801\u7cfb\u5217/debugging-tools","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/L-\u6e90\u7801\u7cfb\u5217/08-debugging-tools.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u5185\u7f6e\u529f\u80fd","permalink":"/docs/main/L-\u6e90\u7801\u7cfb\u5217/builtin-features"},"next":{"title":"\u5b66\u4e60\u8def\u5f84","permalink":"/docs/main/L-\u6e90\u7801\u7cfb\u5217/learning-path"}}');var s=i(4848),d=i(8453);const r={},c="\u8c03\u8bd5\u5206\u6790\u5de5\u5177",a={},t=[{value:"\u8c03\u8bd5\u652f\u6301",id:"\u8c03\u8bd5\u652f\u6301",level:2},{value:"\u8c03\u8bd5\u5668\u63a5\u53e3",id:"\u8c03\u8bd5\u5668\u63a5\u53e3",level:3},{value:"Debug\u7c7b",id:"debug\u7c7b",level:4},{value:"\u65ad\u70b9\u673a\u5236",id:"\u65ad\u70b9\u673a\u5236",level:4},{value:"\u6e90\u7801\u6620\u5c04",id:"\u6e90\u7801\u6620\u5c04",level:3},{value:"\u4f4d\u7f6e\u4fe1\u606f",id:"\u4f4d\u7f6e\u4fe1\u606f",level:4},{value:"\u8c03\u7528\u6808\u8ddf\u8e2a",id:"\u8c03\u7528\u6808\u8ddf\u8e2a",level:4},{value:"\u6027\u80fd\u5206\u6790\u5de5\u5177",id:"\u6027\u80fd\u5206\u6790\u5de5\u5177",level:2},{value:"CPU Profiler",id:"cpu-profiler",level:3},{value:"\u91c7\u6837\u5206\u6790\u5668",id:"\u91c7\u6837\u5206\u6790\u5668",level:4},{value:"\u8c03\u7528\u6811\u6784\u5efa",id:"\u8c03\u7528\u6811\u6784\u5efa",level:4},{value:"\u5806\u5206\u6790\u5668",id:"\u5806\u5206\u6790\u5668",level:3},{value:"\u5806\u5feb\u7167",id:"\u5806\u5feb\u7167",level:4},{value:"\u5bf9\u8c61\u7edf\u8ba1",id:"\u5bf9\u8c61\u7edf\u8ba1",level:4},{value:"d8\u8c03\u8bd5\u5de5\u5177",id:"d8\u8c03\u8bd5\u5de5\u5177",level:2},{value:"\u547d\u4ee4\u884c\u9009\u9879",id:"\u547d\u4ee4\u884c\u9009\u9879",level:3},{value:"\u4f18\u5316\u8ddf\u8e2a",id:"\u4f18\u5316\u8ddf\u8e2a",level:4},{value:"\u7f16\u8bd1\u4fe1\u606f",id:"\u7f16\u8bd1\u4fe1\u606f",level:4},{value:"\u5185\u5b58\u5206\u6790",id:"\u5185\u5b58\u5206\u6790",level:4},{value:"\u5185\u7f6e\u8c03\u8bd5\u51fd\u6570",id:"\u5185\u7f6e\u8c03\u8bd5\u51fd\u6570",level:3},{value:"\u4f18\u5316\u63a7\u5236",id:"\u4f18\u5316\u63a7\u5236",level:4},{value:"\u5bf9\u8c61\u68c0\u67e5",id:"\u5bf9\u8c61\u68c0\u67e5",level:4},{value:"\u6027\u80fd\u76d1\u63a7",id:"\u6027\u80fd\u76d1\u63a7",level:2},{value:"\u8fd0\u884c\u65f6\u7edf\u8ba1",id:"\u8fd0\u884c\u65f6\u7edf\u8ba1",level:3},{value:"\u8ba1\u6570\u5668\u7cfb\u7edf",id:"\u8ba1\u6570\u5668\u7cfb\u7edf",level:4},{value:"\u7edf\u8ba1\u7c7b\u522b",id:"\u7edf\u8ba1\u7c7b\u522b",level:4},{value:"\u5185\u5b58\u4f7f\u7528\u76d1\u63a7",id:"\u5185\u5b58\u4f7f\u7528\u76d1\u63a7",level:3},{value:"\u5806\u7edf\u8ba1",id:"\u5806\u7edf\u8ba1",level:4},{value:"\u7a7a\u95f4\u7edf\u8ba1",id:"\u7a7a\u95f4\u7edf\u8ba1",level:4},{value:"\u4ee3\u7801\u8986\u76d6\u7387",id:"\u4ee3\u7801\u8986\u76d6\u7387",level:2},{value:"\u8986\u76d6\u7387\u6536\u96c6",id:"\u8986\u76d6\u7387\u6536\u96c6",level:3},{value:"\u8986\u76d6\u7387\u6a21\u5f0f",id:"\u8986\u76d6\u7387\u6a21\u5f0f",level:4},{value:"\u8986\u76d6\u7387\u6570\u636e",id:"\u8986\u76d6\u7387\u6570\u636e",level:3},{value:"\u7c7b\u578b\u53cd\u9988\u53ef\u89c6\u5316",id:"\u7c7b\u578b\u53cd\u9988\u53ef\u89c6\u5316",level:2},{value:"IC\u72b6\u6001\u67e5\u770b",id:"ic\u72b6\u6001\u67e5\u770b",level:3},{value:"\u53cd\u9988\u5411\u91cf\u5206\u6790",id:"\u53cd\u9988\u5411\u91cf\u5206\u6790",level:3},{value:"\u7f16\u8bd1\u5668\u53ef\u89c6\u5316",id:"\u7f16\u8bd1\u5668\u53ef\u89c6\u5316",level:2},{value:"TurboFan\u56fe\u53ef\u89c6\u5316",id:"turbofan\u56fe\u53ef\u89c6\u5316",level:3},{value:"Turbolizer\u5de5\u5177",id:"turbolizer\u5de5\u5177",level:4},{value:"\u56fe\u9636\u6bb5",id:"\u56fe\u9636\u6bb5",level:4},{value:"\u5b57\u8282\u7801\u53ef\u89c6\u5316",id:"\u5b57\u8282\u7801\u53ef\u89c6\u5316",level:3},{value:"\u5185\u5b58\u6cc4\u6f0f\u68c0\u6d4b",id:"\u5185\u5b58\u6cc4\u6f0f\u68c0\u6d4b",level:2},{value:"\u5806\u5feb\u7167\u6bd4\u8f83",id:"\u5806\u5feb\u7167\u6bd4\u8f83",level:3},{value:"\u5bf9\u8c61\u8ddf\u8e2a",id:"\u5bf9\u8c61\u8ddf\u8e2a",level:3},{value:"\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5",id:"\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5",level:2},{value:"\u5fae\u57fa\u51c6\u6d4b\u8bd5",id:"\u5fae\u57fa\u51c6\u6d4b\u8bd5",level:3},{value:"\u7f16\u8bd1\u65f6\u95f4\u6d4b\u91cf",id:"\u7f16\u8bd1\u65f6\u95f4\u6d4b\u91cf",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u8c03\u8bd5\u5206\u6790\u5de5\u5177",children:"\u8c03\u8bd5\u5206\u6790\u5de5\u5177"})}),"\n",(0,s.jsx)(n.p,{children:"V8\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u8c03\u8bd5\u548c\u6027\u80fd\u5206\u6790\u5de5\u5177\uff0c\u5e2e\u52a9\u5f00\u53d1\u8005\u7406\u89e3\u548c\u4f18\u5316JavaScript\u4ee3\u7801\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"\u8c03\u8bd5\u652f\u6301",children:"\u8c03\u8bd5\u652f\u6301"}),"\n",(0,s.jsx)(n.h3,{id:"\u8c03\u8bd5\u5668\u63a5\u53e3",children:"\u8c03\u8bd5\u5668\u63a5\u53e3"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4f4d\u7f6e"}),": ",(0,s.jsx)(n.code,{children:"src/debug/"})]}),"\n",(0,s.jsx)(n.h4,{id:"debug\u7c7b",children:"Debug\u7c7b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class Debug {\n  void SetBreakPoint(Handle<SharedFunctionInfo> shared,\n                    Handle<BreakPoint> break_point);\n  void ClearBreakPoint(Handle<BreakPoint> break_point);\n  void PrepareStepIn(Handle<JSFunction> function);\n  void PrepareStepNext();\n  void PrepareStepOut();\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u65ad\u70b9\u673a\u5236",children:"\u65ad\u70b9\u673a\u5236"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class BreakPoint {\n  int id();                     // \u65ad\u70b9ID\n  int source_position();        // \u6e90\u7801\u4f4d\u7f6e\n  Handle<Object> condition();   // \u65ad\u70b9\u6761\u4ef6\n};\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u6e90\u7801\u6620\u5c04",children:"\u6e90\u7801\u6620\u5c04"}),"\n",(0,s.jsx)(n.h4,{id:"\u4f4d\u7f6e\u4fe1\u606f",children:"\u4f4d\u7f6e\u4fe1\u606f"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class SourcePosition {\n  int ScriptOffset();           // \u811a\u672c\u504f\u79fb\u91cf\n  int InliningId();            // \u5185\u8054ID\n  bool IsKnown();              // \u4f4d\u7f6e\u662f\u5426\u5df2\u77e5\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u8c03\u7528\u6808\u8ddf\u8e2a",children:"\u8c03\u7528\u6808\u8ddf\u8e2a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class StackTrace {\n  Handle<StackFrameInfo> GetFrame(int index);\n  int GetFrameCount();\n  Handle<String> ToString();\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u6027\u80fd\u5206\u6790\u5de5\u5177",children:"\u6027\u80fd\u5206\u6790\u5de5\u5177"}),"\n",(0,s.jsx)(n.h3,{id:"cpu-profiler",children:"CPU Profiler"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4f4d\u7f6e"}),": ",(0,s.jsx)(n.code,{children:"src/profiler/"})]}),"\n",(0,s.jsx)(n.h4,{id:"\u91c7\u6837\u5206\u6790\u5668",children:"\u91c7\u6837\u5206\u6790\u5668"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class CpuProfiler {\n  void StartProfiling(Handle<String> title);\n  CpuProfile* StopProfiling(Handle<String> title);\n  void SetSamplingInterval(int us);\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u8c03\u7528\u6811\u6784\u5efa",children:"\u8c03\u7528\u6811\u6784\u5efa"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class ProfileTree {\n  ProfileNode* AddPathFromEnd(const std::vector<CodeEntry*>& path);\n  void AddSample(ProfileNode* node, int count);\n  ProfileNode* root();\n};\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5806\u5206\u6790\u5668",children:"\u5806\u5206\u6790\u5668"}),"\n",(0,s.jsx)(n.h4,{id:"\u5806\u5feb\u7167",children:"\u5806\u5feb\u7167"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class HeapProfiler {\n  const HeapSnapshot* TakeHeapSnapshot();\n  void StartTrackingHeapObjects();\n  void StopTrackingHeapObjects();\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5bf9\u8c61\u7edf\u8ba1",children:"\u5bf9\u8c61\u7edf\u8ba1"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class HeapObjectsMap {\n  SnapshotObjectId FindEntry(Address addr);\n  void AddEntry(Address addr, SnapshotObjectId id);\n  void RemoveDeadEntries();\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"d8\u8c03\u8bd5\u5de5\u5177",children:"d8\u8c03\u8bd5\u5de5\u5177"}),"\n",(0,s.jsx)(n.h3,{id:"\u547d\u4ee4\u884c\u9009\u9879",children:"\u547d\u4ee4\u884c\u9009\u9879"}),"\n",(0,s.jsx)(n.h4,{id:"\u4f18\u5316\u8ddf\u8e2a",children:"\u4f18\u5316\u8ddf\u8e2a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u8ddf\u8e2a\u4f18\u5316\u8fc7\u7a0b\nd8 --trace-opt script.js\n\n# \u8ddf\u8e2a\u53cd\u4f18\u5316\nd8 --trace-deopt script.js\n\n# \u8ddf\u8e2a\u5185\u8054\nd8 --trace-inlining script.js\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u7f16\u8bd1\u4fe1\u606f",children:"\u7f16\u8bd1\u4fe1\u606f"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u663e\u793a\u5b57\u8282\u7801\nd8 --print-bytecode script.js\n\n# \u663e\u793a\u4f18\u5316\u4ee3\u7801\nd8 --print-opt-code script.js\n\n# \u663e\u793a\u53cd\u6c47\u7f16\nd8 --print-code script.js\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5185\u5b58\u5206\u6790",children:"\u5185\u5b58\u5206\u6790"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# GC\u8ddf\u8e2a\nd8 --trace-gc script.js\n\n# \u5806\u7edf\u8ba1\nd8 --heap-stats script.js\n\n# \u5185\u5b58\u4f7f\u7528\nd8 --trace-gc-verbose script.js\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5185\u7f6e\u8c03\u8bd5\u51fd\u6570",children:"\u5185\u7f6e\u8c03\u8bd5\u51fd\u6570"}),"\n",(0,s.jsx)(n.h4,{id:"\u4f18\u5316\u63a7\u5236",children:"\u4f18\u5316\u63a7\u5236"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u6807\u8bb0\u51fd\u6570\u4e3a\u4f18\u5316\n%OptimizeFunctionOnNextCall(func);\n\n// \u5f3a\u5236\u53cd\u4f18\u5316\n%DeoptimizeFunction(func);\n\n// \u68c0\u67e5\u4f18\u5316\u72b6\u6001\n%GetOptimizationStatus(func);\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5bf9\u8c61\u68c0\u67e5",children:"\u5bf9\u8c61\u68c0\u67e5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u68c0\u67e5\u5bf9\u8c61\u7c7b\u578b\n%HasFastProperties(obj);\n%HasFastElements(obj);\n%HasDictionaryElements(obj);\n\n// \u68c0\u67e5Hidden Class\n%HaveSameMap(obj1, obj2);\n%DebugPrint(obj);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u6027\u80fd\u76d1\u63a7",children:"\u6027\u80fd\u76d1\u63a7"}),"\n",(0,s.jsx)(n.h3,{id:"\u8fd0\u884c\u65f6\u7edf\u8ba1",children:"\u8fd0\u884c\u65f6\u7edf\u8ba1"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4f4d\u7f6e"}),": ",(0,s.jsx)(n.code,{children:"src/logging/"})]}),"\n",(0,s.jsx)(n.h4,{id:"\u8ba1\u6570\u5668\u7cfb\u7edf",children:"\u8ba1\u6570\u5668\u7cfb\u7edf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class RuntimeCallStats {\n  void Enter(RuntimeCallCounterId counter_id);\n  void Leave(RuntimeCallCounterId counter_id);\n  void Print(std::ostream& os);\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u7edf\u8ba1\u7c7b\u522b",children:"\u7edf\u8ba1\u7c7b\u522b"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u7f16\u8bd1\u65f6\u95f4"}),": \u5404\u7f16\u8bd1\u5668\u7684\u7f16\u8bd1\u8017\u65f6"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"GC\u65f6\u95f4"}),": \u5783\u573e\u56de\u6536\u8017\u65f6"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8fd0\u884c\u65f6\u8c03\u7528"}),": \u8fd0\u884c\u65f6\u51fd\u6570\u8c03\u7528\u7edf\u8ba1"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"IC\u7edf\u8ba1"}),": \u5185\u8054\u7f13\u5b58\u547d\u4e2d\u7387"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5185\u5b58\u4f7f\u7528\u76d1\u63a7",children:"\u5185\u5b58\u4f7f\u7528\u76d1\u63a7"}),"\n",(0,s.jsx)(n.h4,{id:"\u5806\u7edf\u8ba1",children:"\u5806\u7edf\u8ba1"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class HeapStats {\n  size_t total_heap_size();\n  size_t used_heap_size();\n  size_t heap_size_limit();\n  size_t total_available_size();\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u7a7a\u95f4\u7edf\u8ba1",children:"\u7a7a\u95f4\u7edf\u8ba1"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class SpaceStatistics {\n  size_t size();                // \u7a7a\u95f4\u5927\u5c0f\n  size_t capacity();            // \u7a7a\u95f4\u5bb9\u91cf\n  size_t available();           // \u53ef\u7528\u7a7a\u95f4\n  size_t physical_size();       // \u7269\u7406\u5927\u5c0f\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u4ee3\u7801\u8986\u76d6\u7387",children:"\u4ee3\u7801\u8986\u76d6\u7387"}),"\n",(0,s.jsx)(n.h3,{id:"\u8986\u76d6\u7387\u6536\u96c6",children:"\u8986\u76d6\u7387\u6536\u96c6"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4f4d\u7f6e"}),": ",(0,s.jsx)(n.code,{children:"src/debug/debug-coverage.cc"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class Coverage {\n  void SelectMode(CoverageMode mode);\n  std::unique_ptr<Coverage> Collect();\n  void Reset();\n};\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u8986\u76d6\u7387\u6a21\u5f0f",children:"\u8986\u76d6\u7387\u6a21\u5f0f"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6700\u4f73\u52aa\u529b"}),": \u57fa\u4e8e\u73b0\u6709\u4fe1\u606f\u7684\u8986\u76d6\u7387"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5757\u8986\u76d6"}),": \u57fa\u672c\u5757\u7ea7\u522b\u7684\u8986\u76d6\u7387"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u7cbe\u786e\u8986\u76d6"}),": \u7cbe\u786e\u7684\u8bed\u53e5\u8986\u76d6\u7387"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u8986\u76d6\u7387\u6570\u636e",children:"\u8986\u76d6\u7387\u6570\u636e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class CoverageFunction {\n  Handle<String> name();        // \u51fd\u6570\u540d\n  size_t start_offset();        // \u5f00\u59cb\u4f4d\u7f6e\n  size_t end_offset();          // \u7ed3\u675f\u4f4d\u7f6e\n  uint32_t count();            // \u6267\u884c\u6b21\u6570\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u7c7b\u578b\u53cd\u9988\u53ef\u89c6\u5316",children:"\u7c7b\u578b\u53cd\u9988\u53ef\u89c6\u5316"}),"\n",(0,s.jsx)(n.h3,{id:"ic\u72b6\u6001\u67e5\u770b",children:"IC\u72b6\u6001\u67e5\u770b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u8ddf\u8e2aIC\u72b6\u6001\u53d8\u5316\nd8 --trace-ic script.js\n\n# \u8f93\u51fa\u793a\u4f8b:\n# [LoadIC in ~+34 at script.js:2 (0->.) map=0x... handler=0x...]\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u53cd\u9988\u5411\u91cf\u5206\u6790",children:"\u53cd\u9988\u5411\u91cf\u5206\u6790"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u67e5\u770b\u51fd\u6570\u7684\u53cd\u9988\u5411\u91cf\n%DebugPrint(%GetFeedback(func));\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u7f16\u8bd1\u5668\u53ef\u89c6\u5316",children:"\u7f16\u8bd1\u5668\u53ef\u89c6\u5316"}),"\n",(0,s.jsx)(n.h3,{id:"turbofan\u56fe\u53ef\u89c6\u5316",children:"TurboFan\u56fe\u53ef\u89c6\u5316"}),"\n",(0,s.jsx)(n.h4,{id:"turbolizer\u5de5\u5177",children:"Turbolizer\u5de5\u5177"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u751f\u6210\u4f18\u5316\u56fe\nd8 --trace-turbo script.js\n\n# \u4f7f\u7528Turbolizer\u67e5\u770b\n# tools/turbolizer/turbolizer.html\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u56fe\u9636\u6bb5",children:"\u56fe\u9636\u6bb5"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5b57\u8282\u7801\u56fe"}),": \u4ece\u5b57\u8282\u7801\u6784\u5efa\u7684\u521d\u59cb\u56fe"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4f18\u5316\u56fe"}),": \u5404\u4f18\u5316\u9636\u6bb5\u7684\u56fe\u53d8\u5316"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u673a\u5668\u7801\u56fe"}),": \u6700\u7ec8\u7684\u673a\u5668\u7801\u8868\u793a"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5b57\u8282\u7801\u53ef\u89c6\u5316",children:"\u5b57\u8282\u7801\u53ef\u89c6\u5316"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u8be6\u7ec6\u5b57\u8282\u7801\u4fe1\u606f\nd8 --print-bytecode --print-bytecode-filter=functionName script.js\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5185\u5b58\u6cc4\u6f0f\u68c0\u6d4b",children:"\u5185\u5b58\u6cc4\u6f0f\u68c0\u6d4b"}),"\n",(0,s.jsx)(n.h3,{id:"\u5806\u5feb\u7167\u6bd4\u8f83",children:"\u5806\u5feb\u7167\u6bd4\u8f83"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u751f\u6210\u5806\u5feb\u7167\nlet snapshot1 = %TakeHeapSnapshot();\n// ... \u6267\u884c\u4ee3\u7801\nlet snapshot2 = %TakeHeapSnapshot();\n\n// \u6bd4\u8f83\u5feb\u7167\u627e\u51fa\u5185\u5b58\u589e\u957f\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5bf9\u8c61\u8ddf\u8e2a",children:"\u5bf9\u8c61\u8ddf\u8e2a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class HeapObjectsTracker {\n  void StartTracking();\n  void StopTracking();\n  SnapshotObjectId GetObjectId(Address object_addr);\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5",children:"\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5"}),"\n",(0,s.jsx)(n.h3,{id:"\u5fae\u57fa\u51c6\u6d4b\u8bd5",children:"\u5fae\u57fa\u51c6\u6d4b\u8bd5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u4f7f\u7528%BenchMaglev\u548c%BenchTurbofan\nfunction testFunction() {\n  // \u6d4b\u8bd5\u4ee3\u7801\n}\n\n// \u9884\u70ed\nfor (let i = 0; i < 1000; i++) testFunction();\n\n// \u57fa\u51c6\u6d4b\u8bd5\nlet result = %BenchTurbofan(testFunction, 10000);\nconsole.log(`Average time: ${result}ms`);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u7f16\u8bd1\u65f6\u95f4\u6d4b\u91cf",children:"\u7f16\u8bd1\u65f6\u95f4\u6d4b\u91cf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u6d4b\u91cf\u7f16\u8bd1\u65f6\u95f4\nd8 --trace-opt-verbose --trace-compile script.js\n"})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var l=i(6540);const s={},d=l.createContext(s);function r(e){const n=l.useContext(d);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),l.createElement(d.Provider,{value:n},e.children)}}}]);